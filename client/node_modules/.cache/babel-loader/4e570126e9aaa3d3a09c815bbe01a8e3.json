{"ast":null,"code":"export const addMessageToStore = (state, payload) => {\n  const {\n    message,\n    sender\n  } = payload;\n  console.log('Inside addMessageToStore', payload); // if sender isn't null, that means the message needs to be put in a brand new convo\n\n  if (sender !== null) {\n    const newConvo = {\n      id: message.conversationId,\n      otherUser: sender,\n      messages: [message]\n    };\n    newConvo.latestMessageText = message.text;\n    return [newConvo, ...state];\n  }\n\n  return state.map(convo => {\n    console.log(convo);\n\n    if (convo.id === message.conversationId) {\n      const convoCopy = { ...convo\n      };\n      convoCopy.messages = [...convo.messages, message];\n      convoCopy.latestMessageText = message.text;\n      return convoCopy;\n    } else {\n      return convo;\n    }\n  });\n};\nexport const addOnlineUserToStore = (state, id) => {\n  return state.map(convo => {\n    if (convo.otherUser.id === id) {\n      const convoCopy = { ...convo\n      };\n      convoCopy.otherUser.online = true;\n      return convoCopy;\n    } else {\n      return convo;\n    }\n  });\n};\nexport const removeOfflineUserFromStore = (state, id) => {\n  return state.map(convo => {\n    if (convo.otherUser.id === id) {\n      const convoCopy = { ...convo\n      };\n      convoCopy.otherUser.online = false;\n      return convoCopy;\n    } else {\n      return convo;\n    }\n  });\n};\nexport const addSearchedUsersToStore = (state, users) => {\n  const currentUsers = {}; // make table of current users so we can lookup faster\n\n  state.forEach(convo => {\n    currentUsers[convo.otherUser.id] = true;\n  });\n  const newState = [...state];\n  users.forEach(user => {\n    // only create a fake convo if we don't already have a convo with this user\n    if (!currentUsers[user.id]) {\n      let fakeConvo = {\n        otherUser: user,\n        messages: []\n      };\n      newState.push(fakeConvo);\n    }\n  });\n  return newState;\n};\nexport const addNewConvoToStore = (state, recipientId, message) => {\n  return state.map(convo => {\n    if (convo.otherUser.id === recipientId) {\n      convo.id = message.conversationId;\n      convo.messages.push(message);\n      convo.latestMessageText = message.text;\n      return convo;\n    } else {\n      return convo;\n    }\n  });\n};","map":{"version":3,"sources":["/home/angel/repos/messenger-3457/client/src/store/utils/reducerFunctions.js"],"names":["addMessageToStore","state","payload","message","sender","console","log","newConvo","id","conversationId","otherUser","messages","latestMessageText","text","map","convo","convoCopy","addOnlineUserToStore","online","removeOfflineUserFromStore","addSearchedUsersToStore","users","currentUsers","forEach","newState","user","fakeConvo","push","addNewConvoToStore","recipientId"],"mappings":"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","sourcesContent":["export const addMessageToStore = (state, payload) => {\n  const { message, sender } = payload;\n  console.log('Inside addMessageToStore', payload);\n  // if sender isn't null, that means the message needs to be put in a brand new convo\n  if (sender !== null) {\n    const newConvo = {\n      id: message.conversationId,\n      otherUser: sender,\n      messages: [message],\n    };\n    newConvo.latestMessageText = message.text;\n    return [newConvo, ...state];\n  }\n\n  return state.map((convo) => {\n    console.log(convo);\n    if (convo.id === message.conversationId) {\n      const convoCopy = { ...convo };\n      convoCopy.messages = [...convo.messages, message];\n      convoCopy.latestMessageText = message.text;\n      return convoCopy;\n    } else {\n      return convo;\n    }\n  });\n};\n\nexport const addOnlineUserToStore = (state, id) => {\n  return state.map((convo) => {\n    if (convo.otherUser.id === id) {\n      const convoCopy = { ...convo };\n      convoCopy.otherUser.online = true;\n      return convoCopy;\n    } else {\n      return convo;\n    }\n  });\n};\n\nexport const removeOfflineUserFromStore = (state, id) => {\n  return state.map((convo) => {\n    if (convo.otherUser.id === id) {\n      const convoCopy = { ...convo };\n      convoCopy.otherUser.online = false;\n      return convoCopy;\n    } else {\n      return convo;\n    }\n  });\n};\n\nexport const addSearchedUsersToStore = (state, users) => {\n  const currentUsers = {};\n\n  // make table of current users so we can lookup faster\n  state.forEach((convo) => {\n    currentUsers[convo.otherUser.id] = true;\n  });\n\n  const newState = [...state];\n  users.forEach((user) => {\n    // only create a fake convo if we don't already have a convo with this user\n    if (!currentUsers[user.id]) {\n      let fakeConvo = { otherUser: user, messages: [] };\n      newState.push(fakeConvo);\n    }\n  });\n\n  return newState;\n};\n\nexport const addNewConvoToStore = (state, recipientId, message) => {\n  return state.map((convo) => {\n    if (convo.otherUser.id === recipientId) {\n      convo.id = message.conversationId;\n      convo.messages.push(message);\n      convo.latestMessageText = message.text;\n      return convo;\n    } else {\n      return convo;\n    }\n  });\n};\n"]},"metadata":{},"sourceType":"module"}