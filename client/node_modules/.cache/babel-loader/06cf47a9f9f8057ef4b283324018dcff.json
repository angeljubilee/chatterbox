{"ast":null,"code":"import io from \"socket.io-client\";\nimport store from \"./store\";\nimport { setNewMessage, removeOfflineUser, addOnlineUser, updateMessages } from \"./store/conversations\";\nconst socket = io(window.location.origin);\nsocket.on(\"connect\", () => {\n  console.log(\"connected to server\");\n  socket.on(\"add-online-user\", id => {\n    store.dispatch(addOnlineUser(id));\n  });\n  socket.on(\"remove-offline-user\", id => {\n    store.dispatch(removeOfflineUser(id));\n  });\n  socket.on(\"new-message\", data => {\n    console.log('Inside socket.js');\n    console.log('Calling setNewMessage');\n    store.dispatch(setNewMessage(data.message, data.sender));\n  });\n  socket.on(\"mark-read\", data => {\n    console.log('Inside socket.js');\n    console.log(data);\n    console.log('Calling updateMessages', data.conversationId);\n    store.dispatch(updateMessages(conversationId));\n  });\n});\nexport default socket;","map":{"version":3,"sources":["/home/angel/repos/messenger-3457/client/src/socket.js"],"names":["io","store","setNewMessage","removeOfflineUser","addOnlineUser","updateMessages","socket","window","location","origin","on","console","log","id","dispatch","data","message","sender","conversationId"],"mappings":"AAAA,OAAOA,EAAP,MAAe,kBAAf;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SACEC,aADF,EAEEC,iBAFF,EAGEC,aAHF,EAIEC,cAJF,QAKO,uBALP;AAOA,MAAMC,MAAM,GAAGN,EAAE,CAACO,MAAM,CAACC,QAAP,CAAgBC,MAAjB,CAAjB;AAEAH,MAAM,CAACI,EAAP,CAAU,SAAV,EAAqB,MAAM;AACzBC,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AAEAN,EAAAA,MAAM,CAACI,EAAP,CAAU,iBAAV,EAA8BG,EAAD,IAAQ;AACnCZ,IAAAA,KAAK,CAACa,QAAN,CAAeV,aAAa,CAACS,EAAD,CAA5B;AACD,GAFD;AAIAP,EAAAA,MAAM,CAACI,EAAP,CAAU,qBAAV,EAAkCG,EAAD,IAAQ;AACvCZ,IAAAA,KAAK,CAACa,QAAN,CAAeX,iBAAiB,CAACU,EAAD,CAAhC;AACD,GAFD;AAGAP,EAAAA,MAAM,CAACI,EAAP,CAAU,aAAV,EAA0BK,IAAD,IAAU;AACjCJ,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAX,IAAAA,KAAK,CAACa,QAAN,CAAeZ,aAAa,CAACa,IAAI,CAACC,OAAN,EAAeD,IAAI,CAACE,MAApB,CAA5B;AACD,GAJD;AAKAX,EAAAA,MAAM,CAACI,EAAP,CAAU,WAAV,EAAwBK,IAAD,IAAU;AAC/BJ,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCG,IAAI,CAACG,cAA3C;AACAjB,IAAAA,KAAK,CAACa,QAAN,CAAeT,cAAc,CAACa,cAAD,CAA7B;AACD,GALD;AAMD,CArBD;AAuBA,eAAeZ,MAAf","sourcesContent":["import io from \"socket.io-client\";\nimport store from \"./store\";\nimport {\n  setNewMessage,\n  removeOfflineUser,\n  addOnlineUser,\n  updateMessages,\n} from \"./store/conversations\";\n\nconst socket = io(window.location.origin);\n\nsocket.on(\"connect\", () => {\n  console.log(\"connected to server\");\n\n  socket.on(\"add-online-user\", (id) => {\n    store.dispatch(addOnlineUser(id));\n  });\n\n  socket.on(\"remove-offline-user\", (id) => {\n    store.dispatch(removeOfflineUser(id));\n  });\n  socket.on(\"new-message\", (data) => {\n    console.log('Inside socket.js');\n    console.log('Calling setNewMessage');\n    store.dispatch(setNewMessage(data.message, data.sender));\n  });\n  socket.on(\"mark-read\", (data) => {\n    console.log('Inside socket.js');\n    console.log(data);\n    console.log('Calling updateMessages', data.conversationId);\n    store.dispatch(updateMessages(conversationId));\n  });\n});\n\nexport default socket;\n"]},"metadata":{},"sourceType":"module"}